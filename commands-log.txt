# Ø³Ø¬Ù„ Ø£ÙˆØ§Ù…Ø± Ù…Ø´Ø±ÙˆØ¹ Andro.Backend.Reference
## Ø§Ù„ØªØ§Ø±ÙŠØ®: 28 ÙŠÙ†Ø§ÙŠØ± 2026

### 1. ØªØ­Ø¯ÙŠØ« ABP CLI
```powershell
dotnet tool update -g Volo.Abp.Studio.Cli
```

### 2. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
```powershell
abp new Andro.Backend.Reference -t app --ui none --database-provider ef --database-management-system sqlserver
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­

### 3. ØªØ´ØºÙŠÙ„ DbMigrator Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
```powershell
cd "src/Andro.Backend.Reference.DbMigrator"
dotnet run
```
**Ø§Ù„ÙˆØµÙ:** ÙŠÙ‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªØ·Ø¨ÙŠÙ‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Migrations ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© (Admin User)
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­
- Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: `Reference`
- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ: `admin / 1q2w3E*`

### 4. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (Web Application)
```powershell
cd "src/Andro.Backend.Reference.Web"
dotnet run
```
**Ø§Ù„ÙˆØµÙ:** ÙŠÙ‚ÙˆÙ… Ø¨ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ HTTPS
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­
- Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ: `https://localhost:44309`
- Swagger UI: `https://localhost:44309/swagger`
- Health Check: `https://localhost:44309/health-status`

### 5. Ø¥Ù†Ø´Ø§Ø¡ Postman Collection
**Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©:**
- `Andro.Backend.Reference.postman_collection.json` - Collection ÙƒØ§Ù…Ù„ Ù„ÙƒÙ„ APIs
- `Andro.Backend.Reference.postman_environment.json` - Environment Ù„Ù„Ù…ØªØºÙŠØ±Ø§Øª
- `postman-guide.md` - Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

**Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª:**
- Authentication APIs (Login, Logout, Register)
- User Profile APIs
- Application Configuration
- Identity Management (Users & Roles)
- Tenant Management
- Health Check
- Ù…ÙƒØ§Ù† Ø¬Ø§Ù‡Ø² Ù„Ù€ Products APIs (Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ ÙÙŠ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2)

**Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
1. Ø§Ø³ØªÙˆØ±Ø¯ Ø§Ù„Ù…Ù„ÙÙŠÙ† ÙÙŠ Postman
2. ÙØ¹Ù„ Environment
3. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ â†’ Token ÙŠØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
4. Ø§Ø®ØªØ¨Ø± Ø£ÙŠ API

**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… Postman Collection Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### 6. ØªØµØ­ÙŠØ­ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
```powershell
# Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù‚Ø¯ÙŠÙ…
taskkill /F /PID 34988

# ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
dotnet clean

# Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
dotnet build

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
cd "src/Andro.Backend.Reference.Web"
dotnet run
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„

### 7. ØªØµØ­ÙŠØ­ Login ÙÙŠ Postman Collection
**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:** `/api/account/login` Ù„Ø§ ÙŠØ±Ø¬Ø¹ `access_token`

**Ø§Ù„Ø­Ù„:** Ø§Ø³ØªØ®Ø¯Ø§Ù… OAuth2 Token endpoint Ø§Ù„ØµØ­ÙŠØ­
- Endpoint: `/connect/token`
- Method: POST (x-www-form-urlencoded)
- Parameters:
  - grant_type: password
  - client_id: Reference_App
  - username: admin
  - password: 1q2w3E*
  - scope: offline_access Reference

**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… ÙŠØ±Ø¬Ø¹ JWT Token ØµØ­ÙŠØ­

### 8. Ø¥Ù†Ø´Ø§Ø¡ Product Entity (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2)

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

#### 1. Ø¥Ù†Ø´Ø§Ø¡ Product Entity ÙÙŠ Domain
```
Ù…Ù„Ù: src/Andro.Backend.Reference.Domain/Products/Product.cs
```
- Entity ÙŠØ±Ø« Ù…Ù† `FullAuditedAggregateRoot<Guid>`
- Properties: Name, Price, Stock, Description

#### 2. Ø¥Ø¶Ø§ÙØ© DbSet ÙˆConfiguration ÙÙŠ DbContext
```
Ù…Ù„Ù: src/Andro.Backend.Reference.EntityFrameworkCore/EntityFrameworkCore/ReferenceDbContext.cs
```
- Ø¥Ø¶Ø§ÙØ© `DbSet<Product> Products`
- Configuration Ù„Ù„Ù€ Table ÙˆØ§Ù„ Columns

#### 3. Ø¥Ù†Ø´Ø§Ø¡ Migration
```powershell
dotnet ef migrations add "Added_Product_Entity" --project src/Andro.Backend.Reference.EntityFrameworkCore/Andro.Backend.Reference.EntityFrameworkCore.csproj --startup-project src/Andro.Backend.Reference.DbMigrator/Andro.Backend.Reference.DbMigrator.csproj
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… Migration created

#### 4. ØªØ·Ø¨ÙŠÙ‚ Migration
```powershell
cd "src/Andro.Backend.Reference.DbMigrator"
dotnet run
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… Ø¬Ø¯ÙˆÙ„ AppProducts ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

#### 5. Ø¥Ù†Ø´Ø§Ø¡ DTOs ÙÙŠ Application.Contracts
```
- ProductDto.cs
- CreateProductDto.cs
- UpdateProductDto.cs
- IProductAppService.cs
```

#### 6. Ø¥Ù†Ø´Ø§Ø¡ ProductAppService ÙÙŠ Application
```
Ù…Ù„Ù: src/Andro.Backend.Reference.Application/Products/ProductAppService.cs
```
- ÙŠØ·Ø¨Ù‚ IProductAppService
- CRUD operations ÙƒØ§Ù…Ù„Ø© Ù…Ø¹ manual mapping

#### 7. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
```powershell
dotnet build
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… Build succeeded

#### 8. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
```powershell
cd "src/Andro.Backend.Reference.Web"
dotnet run
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ¹Ù…Ù„ Ù…Ø¹ Product APIs

### 9. ØªØ­Ø¯ÙŠØ« Postman Collection
**ØªÙ… Ø¥Ø¶Ø§ÙØ©:**
- Get Products List (Ù…Ø¹ Pagination & Sorting)
- Get Product By Id
- Create Product (ÙŠØ­ÙØ¸ product_id ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
- Update Product
- Delete Product

**Endpoint:** `/api/app/product`

### 10. Ø¥Ø¶Ø§ÙØ© Authorization & Permissions (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3)

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

#### 1. ØªØ¹Ø±ÙŠÙ Permissions
```
Ù…Ù„Ù: src/Andro.Backend.Reference.Application.Contracts/Permissions/ReferencePermissions.cs
```
- Ø¥Ø¶Ø§ÙØ© `Products.Default`, `Create`, `Edit`, `Delete`

#### 2. Permission Definition Provider
```
Ù…Ù„Ù: src/Andro.Backend.Reference.Application.Contracts/Permissions/ReferencePermissionDefinitionProvider.cs
```
- ØªØ³Ø¬ÙŠÙ„ Product Permissions
- Ø¥Ø¶Ø§ÙØ© Parent-Child Hierarchy

#### 3. Localization
```
Ù…Ù„Ù: src/Andro.Backend.Reference.Domain.Shared/Localization/Reference/en.json
```
- Ø¥Ø¶Ø§ÙØ© Ù†ØµÙˆØµ Ø§Ù„Ù€ Permissions

#### 4. ØªØ·Ø¨ÙŠÙ‚ Authorization
```
Ù…Ù„Ù: src/Andro.Backend.Reference.Application/Products/ProductAppService.cs
```
- Ø¥Ø¶Ø§ÙØ© `[Authorize]` attributes Ø¹Ù„Ù‰ ÙƒÙ„ method
- `GetList/Get` â†’ `Products.Default`
- `Create` â†’ `Products.Create`
- `Update` â†’ `Products.Edit`
- `Delete` â†’ `Products.Delete`

#### 5. Data Seeding Ù„Ù„Ù€ Permissions
```
Ù…Ù„Ù: src/Andro.Backend.Reference.DbMigrator/ProductPermissionsDataSeedContributor.cs
```
- Ø¥Ø¹Ø·Ø§Ø¡ Admin Role ÙƒÙ„ Product Permissions ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

#### 6. ØªØ·Ø¨ÙŠÙ‚ Permissions
```powershell
cd "src/Andro.Backend.Reference.DbMigrator"
dotnet run
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… Admin Role Ø¹Ù†Ø¯Ù‡ Ø§Ù„Ø¢Ù† ÙƒÙ„ Product Permissions

#### 7. Ø¨Ù†Ø§Ø¡ ÙˆØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
```powershell
dotnet build
cd "src/Andro.Backend.Reference.Web"
dotnet run
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… APIs Ù…Ø­Ù…ÙŠØ© Ø¨Ù€ Permissions

### 11. Ø¥Ø¶Ø§ÙØ© Category Entity & EF Core Relationships (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3)

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

#### 1. Ø¥Ù†Ø´Ø§Ø¡ Category Entity
```
Ù…Ù„Ù: src/Andro.Backend.Reference.Domain/Categories/Category.cs
```
- FullAuditedAggregateRoot<Guid>
- Properties: Name, Description
- Navigation Property: `ICollection<Product> Products`

#### 2. ØªØ­Ø¯ÙŠØ« Product Entity
```
Ù…Ù„Ù: src/Andro.Backend.Reference.Domain/Products/Product.cs
```
- Ø¥Ø¶Ø§ÙØ© `CategoryId` (Foreign Key)
- Ø¥Ø¶Ø§ÙØ© `Category` (Navigation Property)
- ØªØ­Ø¯ÙŠØ« Constructor

#### 3. DbContext Configuration
```
Ù…Ù„Ù: src/Andro.Backend.Reference.EntityFrameworkCore/EntityFrameworkCore/ReferenceDbContext.cs
```
- Ø¥Ø¶Ø§ÙØ© `DbSet<Category> Categories`
- Configure Category table
- Configure Relationship:
  - `HasOne(p => p.Category).WithMany(c => c.Products)`
  - `HasForeignKey(p => p.CategoryId)`
  - `OnDelete(DeleteBehavior.Restrict)`
- Index Ø¹Ù„Ù‰ CategoryId

#### 4. Migration
```powershell
cd src/Andro.Backend.Reference.EntityFrameworkCore
dotnet ef migrations add "Added_Category_And_Relationship"
```
- Create Categories table
- Insert default category (Uncategorized)
- Add CategoryId column to Products
- Update existing products
- Create indexes and foreign key

```powershell
dotnet ef database update
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… Database Ù…Ø­Ø¯Ø«Ø© Ø¨Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©

#### 5. Category DTOs & Service
```
Ù…Ù„ÙØ§Øª:
- Application.Contracts/Categories/CategoryDto.cs
- Application.Contracts/Categories/CreateCategoryDto.cs
- Application.Contracts/Categories/UpdateCategoryDto.cs
- Application.Contracts/Categories/ICategoryAppService.cs
- Application/Categories/CategoryAppService.cs
```

#### 6. ØªØ­Ø¯ÙŠØ« Product DTOs
```
Ù…Ù„ÙØ§Øª Ù…Ø­Ø¯Ø«Ø©:
- ProductDto: Ø¥Ø¶Ø§ÙØ© CategoryId, CategoryName
- CreateProductDto: Ø¥Ø¶Ø§ÙØ© CategoryId (Required)
- UpdateProductDto: Ø¥Ø¶Ø§ÙØ© CategoryId (Required)
```

#### 7. ØªØ­Ø¯ÙŠØ« ProductAppService
- Ø§Ø³ØªØ®Ø¯Ø§Ù… `includeDetails: true` Ù„ØªØ­Ù…ÙŠÙ„ Category
- ØªØ­Ø¯ÙŠØ« MapToDto Ù„Ø¥Ø¶Ø§ÙØ© CategoryName

**Ø§Ù„Ø®Ù„Ø§ØµØ©:**
âœ… One-to-Many Relationship Ø¬Ø§Ù‡Ø²Ø©
âœ… Category CRUD APIs
âœ… Product APIs ØªØ¹Ø±Ø¶ Category
âœ… Foreign Key Constraints
âœ… Data Migration Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©

#### 8. ØªØ­Ø¯ÙŠØ« Postman Collection
```
Ù…Ù„ÙØ§Øª:
- Andro.Backend.Reference.postman_collection.json
- Andro.Backend.Reference.postman_environment.json
```

**Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª:**
1. Ø¥Ø¶Ø§ÙØ© `category_id` Ù„Ù„Ù€ Environment Variables
2. Ø¥Ø¶Ø§ÙØ© Category CRUD APIs:
   - Get Categories List
   - Get Category By Id
   - Create Category (Ù…Ø¹ auto-save Ù„Ù„Ù€ ID)
   - Update Category
   - Delete Category
3. ØªØ­Ø¯ÙŠØ« Product Create/Update Ù„ÙŠØ´Ù…Ù„ `categoryId`

**Ø§Ù„Ù†ØªÙŠØ¬Ø©:** âœ… Postman Collection ÙƒØ§Ù…Ù„ ÙˆÙ…Ø­Ø¯Ø«

### 12. ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª (28 â†’ 0 Warnings)

**Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªÙˆØ«ÙŠÙ‚ÙŠ:** `09-clean-build-warnings-guide.md`

#### Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© (28):
- NU1504: Duplicate PackageReference (3)
- CS8618: Non-nullable property warnings (20)
- CS8625: Null literal warnings (2)
- CS8604: Null reference argument (2)
- CS8601: Null assignment (1)
- CS0162: Unreachable code (1)

#### Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª:

**1. NU1504 - Duplicate Package**
```
Ù…Ù„Ù: Andro.Backend.Reference.Web.csproj
Ø§Ù„Ø¥ØµÙ„Ø§Ø­: Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ù…ÙƒØ±Ø± Ù…Ù† Microsoft.EntityFrameworkCore.InMemory
```

**2. DTOs Nullable Warnings (13)**
```
Ø§Ù„Ù…Ù„ÙØ§Øª:
- CategoryDto.cs
- CreateCategoryDto.cs
- UpdateCategoryDto.cs
- ProductDto.cs
- CreateProductDto.cs
- UpdateProductDto.cs

Ø§Ù„Ø¥ØµÙ„Ø§Ø­:
- Required fields: = null!
- Optional fields: string? Description
```

**3. Entities Nullable Warnings (10)**
```
Ø§Ù„Ù…Ù„ÙØ§Øª:
- Category.cs
- Product.cs

Ø§Ù„Ø¥ØµÙ„Ø§Ø­:
- Navigation Properties: Category? Category
- Constructor parameters: string? description = null
- Protected constructor: Name = string.Empty
```

**4. Application Service (1)**
```
Ù…Ù„Ù: ProductAppService.cs
Ø§Ù„Ø¥ØµÙ„Ø§Ø­: CategoryName = product.Category?.Name (already fixed)
```

**5. CS0162 - Unreachable Code (1)**
```
Ù…Ù„Ù: ReferenceMenuContributor.cs:52
Ø§Ù„Ø³Ø¨Ø¨: MultiTenancyConsts.IsEnabled = true (const)
Ø§Ù„Ø¥ØµÙ„Ø§Ø­: Ø¥Ø²Ø§Ù„Ø© if/else block ÙˆØªØ±Ùƒ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØµØ­ÙŠØ­ ÙÙ‚Ø·
```

**6. OpenIddict Null Reference (2)**
```
Ù…Ù„Ù: OpenIddictDataSeedContributor.cs
Ø§Ù„Ø¥ØµÙ„Ø§Ø­: Ø¥Ø¶Ø§ÙØ© null checks Ù‚Ø¨Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚ÙŠÙ…
```

**7. CS7022 - Test SDK Warning (Optional)**
```
Ù…Ù„Ù: Andro.Backend.Reference.Web.Tests.csproj
Ø§Ù„Ø¥Ø¶Ø§ÙØ©: <NoWarn>CS7022</NoWarn>
Ø§Ù„Ø³Ø¨Ø¨: Ù„Ø¥Ø®ÙØ§Ø¡ warning Ù…Ù† Microsoft.NET.Test.SDK
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:**
```bash
dotnet build
# Build succeeded in 4.1s
# 0 Warning(s) âœ…
# 0 Error(s) âœ…
```

**ÙÙˆØ§Ø¦Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù†Ø¸ÙŠÙ:**
âœ… Best Practices Ù…ØªØ¨Ø¹Ø©
âœ… Nullable Reference Types ØµØ­
âœ… Production-Ready Code
âœ… No Runtime Surprises
âœ… Maintainable & Clean

### 13. Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Seed ÙƒØ§Ù…Ù„

**Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªÙˆØ«ÙŠÙ‚ÙŠ:** `10-database-seed-guide.md`

#### Ø§Ù„Ø®Ø·ÙˆØ§Øª:

**1. Ø¥Ù†Ø´Ø§Ø¡ ReferenceDataSeedContributor**
```
Ø§Ù„Ù…Ù„Ù: src/Andro.Backend.Reference.Domain/Data/ReferenceDataSeedContributor.cs
Ø§Ù„Ù…Ø­ØªÙˆÙ‰:
- 5 Categories (Electronics, Clothing, Books, Home & Garden, Sports)
- 15 Products (3 Ù„ÙƒÙ„ Category)
- GUIDs Ø«Ø§Ø¨ØªØ© Ù„Ù„Ù€ Categories
```

**2. Ø­Ø°Ù Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª**
```powershell
sqlcmd -S "(localdb)\MSSQLLocalDB" -Q "DROP DATABASE [Reference]"
```

**3. ØªØ´ØºÙŠÙ„ DbMigrator**
```powershell
cd src\Andro.Backend.Reference.DbMigrator
dotnet run
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø©:**
```
[02:54:06 INF] Started database migrations...
[02:54:06 INF] Migrating schema for host database...
[02:54:08 INF] Executing host database seed...
[02:54:10 INF] Successfully completed host database migrations.
```

**4. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©:**

**Categories (5):**
- Electronics: `3a071c15-6b5c-4c5e-9c1e-1c1f1c1f1c1f`
- Clothing: `4b182d26-7c6d-5d6f-0d2f-2d2a2d2a2d2a`
- Books: `5c293e37-8d7e-6e7a-1e3a-3e3b3e3b3e3b`
- Home & Garden: `6d3a4f48-9e8f-7f8b-2f4b-4f4c4f4c4f4c`
- Sports: `7e4b5a59-0f9a-8a9c-3a5c-5a5d5a5d5a5d`

**Products (15):**
- Laptop Pro 15 - $1,299.99
- Wireless Mouse - $29.99
- USB-C Hub - $49.99
- Cotton T-Shirt - $19.99
- Denim Jeans - $59.99
- Winter Jacket - $89.99
- Clean Code - $45.99
- Design Patterns - $54.99
- The Pragmatic Programmer - $42.99
- Garden Tool Set - $79.99
- LED Desk Lamp - $34.99
- Plant Pot Set - $24.99
- Yoga Mat - $29.99
- Resistance Bands Set - $24.99
- Running Shoes - $79.99

**Admin User:**
- Username: `admin`
- Email: `admin@abp.io`
- Password: `1q2w3E*`

**5. ØªØ­Ø¯ÙŠØ« Postman Environment**
```json
{
  "category_id": "3a071c15-6b5c-4c5e-9c1e-1c1f1c1f1c1f"
}
```

**6. Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙÙˆØ±ÙŠ ÙÙŠ Postman:**
```
âœ… Login â†’ Get Token
âœ… Get Categories â†’ 5 results
âœ… Get Products â†’ 15 results
âœ… Get Category by ID â†’ Electronics
âœ… Get Products by Category â†’ 3 Electronics products
```

**Ø§Ù„ÙÙˆØ§Ø¦Ø¯:**
âœ… Database Ø¬Ø§Ù‡Ø²Ø© Ù…Ù† Ø§Ù„ØµÙØ±
âœ… Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙˆØ§Ù‚Ø¹ÙŠØ©
âœ… IDs Ø«Ø§Ø¨ØªØ© Ù„Ù„Ù€ Categories
âœ… Postman Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙÙˆØ±ÙŠ
âœ… Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù€ Create manual data
âœ… Perfect Ù„Ù„Ù€ Testing ÙˆØ§Ù„Ù€ Development

### 14. ØªØ·Ø¨ÙŠÙ‚ Validation Ø´Ø§Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

**Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªÙˆØ«ÙŠÙ‚ÙŠ:** `11-validation-complete-guide.md`
**Test Scenarios:** `validation-test-scenarios.md`

#### Ø§Ù„Ø®Ø·ÙˆØ§Øª:

**1. Ø¥Ù†Ø´Ø§Ø¡ Constants Ù„Ù„Ù€ Validation**
```
Ø§Ù„Ù…Ù„ÙØ§Øª:
- src/Andro.Backend.Reference.Domain.Shared/Products/ProductConsts.cs
- src/Andro.Backend.Reference.Domain.Shared/Categories/CategoryConsts.cs
```

```csharp
// ProductConsts.cs
public static class ProductConsts
{
    public const int MaxNameLength = 128;
    public const int MinNameLength = 3;
    public const int MaxDescriptionLength = 1000;
    public const decimal MinPrice = 0.01m;
    public const decimal MaxPrice = 1000000m;
    public const int MinStock = 0;
    public const int MaxStock = 100000;
}
```

**2. Ø¥Ø¶Ø§ÙØ© Error Codes**
```csharp
// ReferenceDomainErrorCodes.cs
public const string InvalidCategoryName = "Reference:InvalidCategoryName";
public const string DuplicateCategoryName = "Reference:DuplicateCategoryName";
public const string InvalidProductPrice = "Reference:InvalidProductPrice";
public const string InvalidProductStock = "Reference:InvalidProductStock";
// ... etc
```

**3. ØªØ­Ø³ÙŠÙ† Product DTOs**
```csharp
// CreateProductDto.cs & UpdateProductDto.cs
[Required(ErrorMessage = "Product name is required")]
[StringLength(
    ProductConsts.MaxNameLength,
    MinimumLength = ProductConsts.MinNameLength,
    ErrorMessage = "Product name must be between {2} and {1} characters")]
public string Name { get; set; } = null!;

[Required(ErrorMessage = "Price is required")]
[Range(
    typeof(decimal),
    "0.01",
    "1000000",
    ErrorMessage = "Price must be between {1} and {2}")]
public decimal Price { get; set; }

[Required(ErrorMessage = "Stock quantity is required")]
[Range(
    ProductConsts.MinStock,
    ProductConsts.MaxStock,
    ErrorMessage = "Stock must be between {1} and {2}")]
public int Stock { get; set; }

[StringLength(
    ProductConsts.MaxDescriptionLength,
    ErrorMessage = "Description cannot exceed {1} characters")]
public string? Description { get; set; }

[Required(ErrorMessage = "Category is required")]
public Guid CategoryId { get; set; }
```

**4. ØªØ­Ø³ÙŠÙ† Category DTOs**
```csharp
// CreateCategoryDto.cs & UpdateCategoryDto.cs
[Required(ErrorMessage = "Category name is required")]
[StringLength(
    CategoryConsts.MaxNameLength,
    MinimumLength = CategoryConsts.MinNameLength,
    ErrorMessage = "Category name must be between {2} and {1} characters")]
public string Name { get; set; } = null!;

[StringLength(
    CategoryConsts.MaxDescriptionLength,
    ErrorMessage = "Description cannot exceed {1} characters")]
public string? Description { get; set; }
```

**5. Build Ø§Ù„Ù…Ø´Ø±ÙˆØ¹**
```powershell
# Ø¥ÙŠÙ‚Ø§Ù API Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¹Ù…Ù„
Get-Process | Where-Object {$_.ProcessName -like '*Andro.Backend.Reference.Web*'} | Stop-Process -Force

# Build
dotnet build
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø©:**
```
Build succeeded.
    0 Warning(s) âœ…
    0 Error(s) âœ…
Time Elapsed 00:00:15
```

**6. ØªØ´ØºÙŠÙ„ API ÙˆØ§Ø®ØªØ¨Ø§Ø± Validation**
```powershell
cd src\Andro.Backend.Reference.Web
dotnet run
```

**API Ù…ØªØ§Ø­ Ø¹Ù„Ù‰:** `https://localhost:44309`

#### Test Scenarios (18 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ):

**Postman Tests:**
1. âŒ Name empty â†’ 400 "Product name is required"
2. âŒ Name too short (2 chars) â†’ 400 "must be between 3 and 128"
3. âŒ Name too long (>128) â†’ 400
4. âŒ Price negative â†’ 400 "Price must be between 0.01 and 1000000"
5. âŒ Price zero â†’ 400
6. âŒ Price > 1,000,000 â†’ 400
7. âŒ Stock negative â†’ 400 "Stock must be between 0 and 100000"
8. âŒ Stock > 100,000 â†’ 400
9. âŒ CategoryId missing â†’ 400 "Category is required"
10. âŒ Description > 1000 chars â†’ 400 "cannot exceed 1000 characters"
11. âŒ Multiple errors â†’ 400 with multiple validationErrors
12. âœ… Valid product â†’ 200 Created
13. âŒ Category name empty â†’ 400
14. âŒ Category name short â†’ 400
15. âŒ Category description long â†’ 400 "cannot exceed 512 characters"
16. âœ… Valid category â†’ 200 Created
17. âŒ Update invalid â†’ 400
18. âœ… Update valid â†’ 200 OK

#### Ø§Ù„ÙÙˆØ§Ø¦Ø¯:

**âœ… Data Integrity:**
- Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø© 100% ÙÙŠ DB
- Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ÙØ§Ø³Ø¯Ø©

**âœ… Security:**
- Ù…Ù†Ø¹ SQL Injection
- Ù…Ù†Ø¹ invalid input attacks

**âœ… User Experience:**
- Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…ÙÙŠØ¯Ø©
- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¹Ø±Ù Ø¨Ø§Ù„Ø¶Ø¨Ø· Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø®Ø·Ø£

**âœ… Automatic:**
- ABP ÙŠØ¹Ù…Ù„ validation ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„ÙƒØªØ§Ø¨Ø© ÙƒÙˆØ¯ validation ÙŠØ¯ÙˆÙŠ
- ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ ÙƒÙ„ Application Service

**âœ… Consistent:**
- Ù†ÙØ³ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù€ validation ÙÙŠ ÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
- Constants Ù„Ù„Ù€ max/min values
- Error messages Ù…ÙˆØ­Ø¯Ø©

**âœ… Maintainable:**
- Ø³Ù‡Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ (Constants)
- ÙˆØ§Ø¶Ø­ ÙˆÙ‚Ø§Ø¨Ù„ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©
- Best practices

#### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©/Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©:

**Ù…Ù„ÙØ§Øª Ø¬Ø¯ÙŠØ¯Ø©:**
1. `11-validation-complete-guide.md` - Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„
2. `validation-test-scenarios.md` - 18 test scenario
3. `ProductConsts.cs` - Constants
4. `CategoryConsts.cs` - Constants

**Ù…Ù„ÙØ§Øª Ù…Ø¹Ø¯Ù„Ø©:**
5. `ReferenceDomainErrorCodes.cs` - Error codes
6. `CreateProductDto.cs` - Enhanced validation
7. `UpdateProductDto.cs` - Enhanced validation
8. `CreateCategoryDto.cs` - Enhanced validation
9. `UpdateCategoryDto.cs` - Enhanced validation

#### ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ ABP Validation:

```
Request â†’ ABP Interceptor
          â†“
      Validate DTO (Data Annotations)
          â†“
      Valid? â”€â”€Noâ”€â”€> Return 400 + validationErrors
          â†“
         Yes
          â†“
      Execute Application Service
          â†“
      Business Validation (if any)
          â†“
      Domain Validation
          â†“
      Return Response
```

#### Ø§Ù„Ø®Ù„Ø§ØµØ©:

âœ… **Validation Layer ÙƒØ§Ù…Ù„ ÙˆÙ…Ø·Ø¨Ù‚**
âœ… **18 Test Scenarios Ø¬Ø§Ù‡Ø²Ø©**
âœ… **Error Messages ÙˆØ§Ø¶Ø­Ø©**
âœ… **Constants Ù„Ù„Ù€ reusability**
âœ… **Build Ù†Ø¸ÙŠÙ 0 warnings**
âœ… **Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙŠ Postman!**

### 15. ØªØ·Ø¨ÙŠÙ‚ Exception Handling Ø´Ø§Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

**Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªÙˆØ«ÙŠÙ‚ÙŠ:** `12-exception-handling-guide.md`
**Test Scenarios:** `exception-handling-test-scenarios.md`

#### Ø§Ù„Ø®Ø·ÙˆØ§Øª:

**1. Ø¥Ù†Ø´Ø§Ø¡ Custom Business Exception**
```csharp
// InsufficientStockException.cs
namespace Andro.Backend.Reference.Products;

public class InsufficientStockException : BusinessException
{
    public InsufficientStockException(
        string productName,
        int requestedQuantity,
        int availableStock)
        : base(ReferenceDomainErrorCodes.InsufficientStock)
    {
        WithData("ProductName", productName);
        WithData("RequestedQuantity", requestedQuantity);
        WithData("AvailableStock", availableStock);
    }
}
```

**2. ØªØ­Ø¯ÙŠØ« Product Entity - Domain Validation**
```csharp
// Product.cs - ØªØ­ÙˆÙŠÙ„ Properties Ø¥Ù„Ù‰ private set
public string Name { get; private set; } = string.Empty;
public decimal Price { get; private set; }
public int Stock { get; private set; }

// Ø¥Ø¶Ø§ÙØ© Setter Methods Ù…Ø¹ Domain Validation
public void SetPrice(decimal price)
{
    if (price < ProductConsts.MinPrice || price > ProductConsts.MaxPrice)
    {
        throw new BusinessException(ReferenceDomainErrorCodes.InvalidProductPrice)
            .WithData("Price", price)
            .WithData("MinPrice", ProductConsts.MinPrice)
            .WithData("MaxPrice", ProductConsts.MaxPrice);
    }
    Price = price;
}

public void SetStock(int stock)
{
    if (stock < ProductConsts.MinStock || stock > ProductConsts.MaxStock)
    {
        throw new BusinessException(ReferenceDomainErrorCodes.InvalidProductStock)
            .WithData("Stock", stock)
            .WithData("MinStock", ProductConsts.MinStock)
            .WithData("MaxStock", ProductConsts.MaxStock);
    }
    Stock = stock;
}

public void DecreaseStock(int quantity)
{
    if (quantity <= 0)
    {
        throw new BusinessException(ReferenceDomainErrorCodes.InvalidProductStock)
            .WithData("Quantity", quantity);
    }

    if (Stock < quantity)
    {
        throw new InsufficientStockException(Name, quantity, Stock);
    }

    Stock -= quantity;
}
```

**3. ØªØ­Ø¯ÙŠØ« ProductAppService - Business Exceptions**
```csharp
// ProductAppService.cs
public async Task<ProductDto> CreateAsync(CreateProductDto input)
{
    // Check if category exists
    var categoryExists = await _categoryRepository.AnyAsync(c => c.Id == input.CategoryId);
    if (!categoryExists)
    {
        throw new BusinessException(ReferenceDomainErrorCodes.CategoryNotFound)
            .WithData("CategoryId", input.CategoryId);
    }

    // Check for duplicate product name
    var existingProduct = await _repository
        .FirstOrDefaultAsync(p => p.Name == input.Name);

    if (existingProduct != null)
    {
        throw new BusinessException(ReferenceDomainErrorCodes.DuplicateProductName)
            .WithData("ProductName", input.Name);
    }

    var product = new Product(/* ... */);
    await _repository.InsertAsync(product);
    return MapToDto(product);
}

public async Task<ProductDto> GetAsync(Guid id)
{
    var product = await _repository.FindAsync(id, includeDetails: true);

    if (product == null)
    {
        throw new EntityNotFoundException(typeof(Product), id);
    }

    return MapToDto(product);
}
```

**4. ØªØ­Ø¯ÙŠØ« CategoryAppService - Business Exceptions**
```csharp
// CategoryAppService.cs
public async Task DeleteAsync(Guid id)
{
    var category = await _repository.GetAsync(id);

    // Check if category has products
    var hasProducts = await _productRepository.AnyAsync(p => p.CategoryId == id);

    if (hasProducts)
    {
        throw new BusinessException(ReferenceDomainErrorCodes.CategoryHasProducts)
            .WithData("CategoryName", category.Name)
            .WithData("CategoryId", id);
    }

    await _repository.DeleteAsync(category);
}

public async Task<CategoryDto> CreateAsync(CreateCategoryDto input)
{
    // Check for duplicate category name
    var existingCategory = await _repository
        .FirstOrDefaultAsync(c => c.Name == input.Name);

    if (existingCategory != null)
    {
        throw new BusinessException(ReferenceDomainErrorCodes.DuplicateCategoryName)
            .WithData("CategoryName", input.Name);
    }

    var category = new Category(/* ... */);
    await _repository.InsertAsync(category);
    return MapToDto(category);
}
```

**5. Build Ø§Ù„Ù…Ø´Ø±ÙˆØ¹**
```powershell
dotnet build
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø©:**
```
Build succeeded.
    0 Warning(s) âœ…
    0 Error(s) âœ…
Time Elapsed 00:00:23
```

**6. ØªØ´ØºÙŠÙ„ API ÙˆØ§Ø®ØªØ¨Ø§Ø± Exceptions**
```powershell
cd src\Andro.Backend.Reference.Web
dotnet run
```

**API Ù…ØªØ§Ø­ Ø¹Ù„Ù‰:** `https://localhost:44309`

#### Test Scenarios (14 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ):

**Postman Tests:**
1. âŒ Product not found â†’ 404 EntityNotFoundException
2. âŒ Category not found â†’ 403 BusinessException
3. âŒ Duplicate product name â†’ 403 BusinessException
4. âŒ Invalid price (domain validation) â†’ 403 BusinessException
5. âŒ Invalid stock (domain validation) â†’ 403 BusinessException
6. âŒ Update with invalid category â†’ 403 BusinessException
7. âŒ Update with duplicate name â†’ 403 BusinessException
8. âœ… Valid product creation â†’ 200 Success
9. âŒ Category not found â†’ 404 EntityNotFoundException
10. âŒ Duplicate category name â†’ 403 BusinessException
11. âŒ Delete category with products â†’ 403 BusinessException
12. âŒ Update category duplicate name â†’ 403 BusinessException
13. âœ… Valid category creation â†’ 200 Success
14. âœ… Delete empty category â†’ 204 No Content

#### Ø£Ù†ÙˆØ§Ø¹ Exceptions Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:

**1. EntityNotFoundException (404)**
```csharp
throw new EntityNotFoundException(typeof(Product), id);
```

**2. BusinessException (403)**
```csharp
throw new BusinessException(ReferenceDomainErrorCodes.CategoryNotFound)
    .WithData("CategoryId", input.CategoryId);
```

**3. Custom Business Exception (403)**
```csharp
throw new InsufficientStockException(Name, quantity, Stock);
```

#### Exception Flow:

```
Request
  â†“
DTO Validation (400 - AbpValidationException)
  â†“
Application Service
  â†“
Business Rules Check (403 - BusinessException)
  â†“
Domain Layer
  â†“
Domain Validation (403 - BusinessException)
  â†“
Repository
  â†“
Entity Not Found? (404 - EntityNotFoundException)
  â†“
Success (200/204)
```

#### Ø§Ù„ÙÙˆØ§Ø¦Ø¯:

**âœ… User Experience:**
- Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…ÙÙŠØ¯Ø©
- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¹Ø±Ù Ø¨Ø§Ù„Ø¶Ø¨Ø· Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø®Ø·Ø£
- `WithData()` ÙŠØ¹Ø·ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©

**âœ… Security:**
- Ù„Ø§ ØªÙƒØ´Ù Stack Traces
- Ù„Ø§ ØªÙƒØ´Ù ØªÙØ§ØµÙŠÙ„ ØªÙ‚Ù†ÙŠØ© Ø­Ø³Ø§Ø³Ø©
- Error codes Ù…ÙˆØ­Ø¯Ø©

**âœ… Debugging:**
- Ø³Ù‡ÙˆÙ„Ø© ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
- Logging ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† ABP
- Clear error codes

**âœ… Consistency:**
- Ù†ÙØ³ Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ ÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
- HTTP Status Codes ØµØ­ÙŠØ­Ø©
- JSON Response Ù…ÙˆØ­Ø¯

**âœ… Multi-layered Validation:**
- DTO Validation (Data Annotations)
- Application Validation (Business Rules)
- Domain Validation (Entity Rules)

#### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©/Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©:

**Ù…Ù„ÙØ§Øª Ø¬Ø¯ÙŠØ¯Ø©:**
1. `12-exception-handling-guide.md` - Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„
2. `exception-handling-test-scenarios.md` - 14 test scenario
3. `InsufficientStockException.cs` - Custom exception

**Ù…Ù„ÙØ§Øª Ù…Ø¹Ø¯Ù„Ø©:**
4. `Product.cs` - Domain validation Ù…Ø¹ private setters
5. `ProductAppService.cs` - Business exceptions
6. `CategoryAppService.cs` - Business exceptions

#### HTTP Status Codes:

| Code | Ù…ØªÙ‰ ÙŠØ³ØªØ®Ø¯Ù… | Exception Type |
|------|-----------|---------------|
| 200 | Success | - |
| 204 | No Content (Delete) | - |
| 400 | Validation Error | AbpValidationException |
| 403 | Business Rule | BusinessException |
| 404 | Not Found | EntityNotFoundException |
| 500 | Server Error | Exception |

#### Ø§Ù„Ø®Ù„Ø§ØµØ©:

âœ… **Exception Handling Layer ÙƒØ§Ù…Ù„ ÙˆÙ…Ø·Ø¨Ù‚**
âœ… **14 Test Scenarios Ø¬Ø§Ù‡Ø²Ø©**
âœ… **Domain + Application Validation**
âœ… **Clear error messages Ù…Ø¹ Data**
âœ… **Multi-layered approach**
âœ… **Secure - Ù„Ø§ ØªÙƒØ´Ù ØªÙØ§ØµÙŠÙ„ ØªÙ‚Ù†ÙŠØ©**
âœ… **Build Ù†Ø¸ÙŠÙ 0 warnings**
âœ… **Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙŠ Postman!**

### 16. ØªØ·Ø¨ÙŠÙ‚ Localization (ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºØ§Øª) Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

**Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªÙˆØ«ÙŠÙ‚ÙŠ:** `13-localization-guide.md`
**Test Scenarios:** `localization-test-scenarios.md`

#### Ø§Ù„Ø®Ø·ÙˆØ§Øª:

**1. ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù en.json - Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©**
```json
// Domain.Shared/Localization/Reference/en.json
{
  "Culture": "en",
  "Texts": {
    "Permission:Reference": "Reference Permissions",
    "Permission:Products": "Product Management",
    "Permission:Products.Create": "Create Products",
    "Permission:Products.Edit": "Edit Products",
    "Permission:Products.Delete": "Delete Products",
    "Permission:Categories": "Category Management",
    "Permission:Categories.Create": "Create Categories",
    "Permission:Categories.Edit": "Edit Categories",
    "Permission:Categories.Delete": "Delete Categories",

    "Product": "Product",
    "Products": "Products",
    "ProductName": "Product Name",
    "ProductPrice": "Price",
    "ProductStock": "Stock",

    "Category": "Category",
    "Categories": "Categories",
    "CategoryName": "Category Name",

    "Reference:CategoryNotFound": "Category not found",
    "Reference:DuplicateCategoryName": "A category with this name already exists",
    "Reference:CategoryHasProducts": "Cannot delete category because it has products",
    "Reference:InvalidProductPrice": "Invalid product price. Price must be between {MinPrice} and {MaxPrice}",
    "Reference:InvalidProductStock": "Invalid stock quantity. Stock must be between {MinStock} and {MaxStock}",
    "Reference:DuplicateProductName": "A product with this name already exists",
    "Reference:InsufficientStock": "Insufficient stock available. Requested: {RequestedQuantity}, Available: {AvailableStock}"
  }
}
```

**2. ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù ar.json - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©**
```json
// Domain.Shared/Localization/Reference/ar.json
{
  "culture": "ar",
  "texts": {
    "Permission:Reference": "ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹",
    "Permission:Products": "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
    "Permission:Products.Create": "Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù†ØªØ¬Ø§Øª",
    "Permission:Products.Edit": "ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬Ø§Øª",
    "Permission:Products.Delete": "Ø­Ø°Ù Ù…Ù†ØªØ¬Ø§Øª",
    "Permission:Categories": "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª",
    "Permission:Categories.Create": "Ø¥Ù†Ø´Ø§Ø¡ ØªØµÙ†ÙŠÙØ§Øª",
    "Permission:Categories.Edit": "ØªØ¹Ø¯ÙŠÙ„ ØªØµÙ†ÙŠÙØ§Øª",
    "Permission:Categories.Delete": "Ø­Ø°Ù ØªØµÙ†ÙŠÙØ§Øª",

    "Product": "Ù…Ù†ØªØ¬",
    "Products": "Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
    "ProductName": "Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬",
    "ProductPrice": "Ø§Ù„Ø³Ø¹Ø±",
    "ProductStock": "Ø§Ù„ÙƒÙ…ÙŠØ©",

    "Category": "ØªØµÙ†ÙŠÙ",
    "Categories": "Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª",
    "CategoryName": "Ø§Ø³Ù… Ø§Ù„ØªØµÙ†ÙŠÙ",

    "Reference:CategoryNotFound": "Ø§Ù„ØªØµÙ†ÙŠÙ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯",
    "Reference:DuplicateCategoryName": "ÙŠÙˆØ¬Ø¯ ØªØµÙ†ÙŠÙ Ø¨Ù†ÙØ³ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙØ¹Ù„",
    "Reference:CategoryHasProducts": "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„ØªØµÙ†ÙŠÙ Ù„Ø£Ù†Ù‡ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ø§Øª",
    "Reference:InvalidProductPrice": "Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø³Ø¹Ø± Ø¨ÙŠÙ† {MinPrice} Ùˆ {MaxPrice}",
    "Reference:InvalidProductStock": "Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©. ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ÙƒÙ…ÙŠØ© Ø¨ÙŠÙ† {MinStock} Ùˆ {MaxStock}",
    "Reference:DuplicateProductName": "ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬ Ø¨Ù†ÙØ³ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙØ¹Ù„",
    "Reference:InsufficientStock": "Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªÙˆÙØ±Ø© ØºÙŠØ± ÙƒØ§ÙÙŠØ©. Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: {RequestedQuantity}ØŒ Ø§Ù„Ù…ØªÙˆÙØ±: {AvailableStock}"
  }
}
```

**3. Build Ø§Ù„Ù…Ø´Ø±ÙˆØ¹**
```powershell
# Ø¥ÙŠÙ‚Ø§Ù API Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¹Ù…Ù„
Get-Process | Where-Object {$_.ProcessName -like '*Andro.Backend.Reference.Web*'} | Stop-Process -Force

# Build
dotnet build
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø©:**
```
Build succeeded.
    0 Warning(s) âœ…
    0 Error(s) âœ…
Time Elapsed 00:00:18
```

**4. ØªØ´ØºÙŠÙ„ API ÙˆØ§Ø®ØªØ¨Ø§Ø± Localization**
```powershell
cd src\Andro.Backend.Reference.Web
dotnet run
```

**API Ù…ØªØ§Ø­ Ø¹Ù„Ù‰:** `https://localhost:44309`

#### Test Scenarios (14 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ):

**Postman Tests:**

**English Tests (ğŸ‡¬ğŸ‡§):**
1. âŒ Category not found (EN) â†’ 403 "Category not found"
2. âŒ Duplicate product (EN) â†’ 403 "A product with this name already exists"
3. âŒ Invalid price (EN) â†’ 403 "Invalid product price. Price must be between..."
4. âŒ Invalid stock (EN) â†’ 403 "Invalid stock quantity..."
5. âŒ Duplicate category (EN) â†’ 403 "A category with this name already exists"
6. âŒ Category has products (EN) â†’ 403 "Cannot delete category because it has products"
7. âŒ Entity not found (EN) â†’ 404 "There is no such an entity..."

**Arabic Tests (ğŸ‡¸ğŸ‡¦):**
8. âŒ Category not found (AR) â†’ 403 "Ø§Ù„ØªØµÙ†ÙŠÙ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"
9. âŒ Duplicate product (AR) â†’ 403 "ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬ Ø¨Ù†ÙØ³ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙØ¹Ù„"
10. âŒ Invalid price (AR) â†’ 403 "Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± ØµØ­ÙŠØ­..."
11. âŒ Invalid stock (AR) â†’ 403 "Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©..."
12. âŒ Duplicate category (AR) â†’ 403 "ÙŠÙˆØ¬Ø¯ ØªØµÙ†ÙŠÙ Ø¨Ù†ÙØ³ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙØ¹Ù„"
13. âŒ Category has products (AR) â†’ 403 "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„ØªØµÙ†ÙŠÙ Ù„Ø£Ù†Ù‡ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ø§Øª"
14. âŒ Entity not found (AR) â†’ 404 (ABP built-in message)

#### ÙƒÙŠÙ ÙŠØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©:

**Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 1: Accept-Language Header** â­ (Ø§Ù„Ø£ÙØ¶Ù„)
```http
POST /api/app/product
Authorization: Bearer {{access_token}}
Accept-Language: ar-SA
```

**Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 2: Query String**
```http
GET /api/app/product?culture=ar-SA
```

**Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 3: Cookie**
```http
Cookie: Abp.Culture=c=ar-SA|uic=ar-SA
```

#### Localization Flow:

```
Request with Accept-Language header
  â†“
ABP reads header (ar-SA / en-US)
  â†“
Sets CurrentCulture
  â†“
BusinessException thrown with error code
  â†“
ABP looks up code in Localization JSON files
  â†“
Returns message in requested language
  â†“
Response with localized error message
```

#### Ø§Ù„ÙÙˆØ§Ø¦Ø¯:

**âœ… Multi-language Support:**
- Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© ÙƒØ§Ù…Ù„Ø§Ù‹
- Ø³Ù‡Ù„ Ø¥Ø¶Ø§ÙØ© Ù„ØºØ§Øª Ø¬Ø¯ÙŠØ¯Ø©
- ABP ÙŠØ¯Ø¹Ù… 20+ Ù„ØºØ©

**âœ… Better User Experience:**
- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ±Ù‰ ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ù„ØºØªÙ‡
- Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© Ø¨Ù„ØºØªÙ‡
- Permissions Ù…ØªØ±Ø¬Ù…Ø©

**âœ… Centralized Management:**
- ÙƒÙ„ Ø§Ù„Ù†ØµÙˆØµ ÙÙŠ JSON files
- Ø³Ù‡Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©
- Ù„Ø§ hard-coded strings ÙÙŠ Ø§Ù„ÙƒÙˆØ¯

**âœ… Professional:**
- ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø§Ù„Ù…ÙŠ Ø¬Ø§Ù‡Ø²
- ÙŠØ­ØªØ±Ù… Ø«Ù‚Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- Production-ready

**âœ… Automatic:**
- ABP ÙŠØªØ±Ø¬Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„ÙƒÙˆØ¯ Ø¥Ø¶Ø§ÙÙŠ
- ÙŠØ¹Ù…Ù„ Ù…Ø¹ ÙƒÙ„ BusinessException

#### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©:

**Ù…Ù„ÙØ§Øª Ø¬Ø¯ÙŠØ¯Ø©:**
1. `13-localization-guide.md` - Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„
2. `localization-test-scenarios.md` - 14 test scenario

**Ù…Ù„ÙØ§Øª Ù…Ø¹Ø¯Ù„Ø©:**
3. `en.json` - Ø¥Ø¶Ø§ÙØ© Error Codes Ùˆ Permissions Ùˆ Labels
4. `ar.json` - Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©

#### Supported Languages ÙÙŠ ABP:

```
âœ… en (English) - Ù…Ø·Ø¨Ù‚Ø© ÙƒØ§Ù…Ù„Ø§Ù‹
âœ… ar (Arabic) - Ù…Ø·Ø¨Ù‚Ø© ÙƒØ§Ù…Ù„Ø§Ù‹
ğŸŸ¡ de-DE (German) - Ù…Ù„Ù Ù…ÙˆØ¬ÙˆØ¯ØŒ ÙŠØ­ØªØ§Ø¬ ØªØ±Ø¬Ù…Ø©
ğŸŸ¡ fr (French) - Ù…Ù„Ù Ù…ÙˆØ¬ÙˆØ¯ØŒ ÙŠØ­ØªØ§Ø¬ ØªØ±Ø¬Ù…Ø©
ğŸŸ¡ es (Spanish) - Ù…Ù„Ù Ù…ÙˆØ¬ÙˆØ¯ØŒ ÙŠØ­ØªØ§Ø¬ ØªØ±Ø¬Ù…Ø©
... (15+ Ù„ØºØ© Ø£Ø®Ø±Ù‰)
```

#### Ù…Ø«Ø§Ù„: Ù†ÙØ³ Ø§Ù„Ø®Ø·Ø£ Ø¨Ù„ØºØªÙŠÙ†

**English Request:**
```http
POST /api/app/product
Accept-Language: en-US

{"name": "Test", "categoryId": "00000000-0000-0000-0000-000000000000", ...}
```

**Response:**
```json
{
  "error": {
    "code": "Reference:CategoryNotFound",
    "message": "Category not found"
  }
}
```

**Arabic Request:**
```http
POST /api/app/product
Accept-Language: ar-SA

{"name": "Test", "categoryId": "00000000-0000-0000-0000-000000000000", ...}
```

**Response:**
```json
{
  "error": {
    "code": "Reference:CategoryNotFound",
    "message": "Ø§Ù„ØªØµÙ†ÙŠÙ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"
  }
}
```

#### Ø§Ù„Ø®Ù„Ø§ØµØ©:

âœ… **Localization Layer ÙƒØ§Ù…Ù„ ÙˆÙ…Ø·Ø¨Ù‚**
âœ… **14 Test Scenarios Ø¬Ø§Ù‡Ø²Ø© (7 EN + 7 AR)**
âœ… **ÙƒÙ„ Error Codes Ù…ØªØ±Ø¬Ù…Ø©**
âœ… **Permissions Ù…ØªØ±Ø¬Ù…Ø©**
âœ… **Multi-language support Ø¬Ø§Ù‡Ø²**
âœ… **Automatic translation Ù…Ù† ABP**
âœ… **Build Ù†Ø¸ÙŠÙ 0 warnings**
âœ… **Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙŠ Postman!**

### 17. ØªØ·Ø¨ÙŠÙ‚ Event Bus & Domain Events Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

**Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªÙˆØ«ÙŠÙ‚ÙŠ:** `14-event-bus-guide.md`
**Test Guide:** `event-bus-test-guide.md`

#### Ø§Ù„Ø®Ø·ÙˆØ§Øª:

**1. Ø¥Ù†Ø´Ø§Ø¡ Domain Events**

```csharp
// Domain/Products/ProductCreatedEvent.cs
public class ProductCreatedEvent
{
    public Guid ProductId { get; set; }
    public string ProductName { get; set; } = string.Empty;
    public decimal Price { get; set; }
    public int Stock { get; set; }
    public Guid CategoryId { get; set; }
    public DateTime CreatedAt { get; set; }

    public ProductCreatedEvent(
        Guid productId,
        string productName,
        decimal price,
        int stock,
        Guid categoryId)
    {
        ProductId = productId;
        ProductName = productName;
        Price = price;
        Stock = stock;
        CategoryId = categoryId;
        CreatedAt = DateTime.UtcNow;
    }
}
```

```csharp
// Domain/Products/ProductStockChangedEvent.cs
public class ProductStockChangedEvent
{
    public Guid ProductId { get; set; }
    public string ProductName { get; set; } = string.Empty;
    public int OldStock { get; set; }
    public int NewStock { get; set; }
    public int ChangeAmount { get; set; }
    public StockChangeType ChangeType { get; set; }
    public DateTime ChangedAt { get; set; }
}

public enum StockChangeType
{
    Increased,
    Decreased
}
```

**2. ØªØ­Ø¯ÙŠØ« Product Entity - Ù†Ø´Ø± Events**

```csharp
// Domain/Products/Product.cs
public void DecreaseStock(int quantity)
{
    // ... validation ...

    var oldStock = Stock;
    Stock -= quantity;

    // Publish Domain Event
    AddLocalEvent(new ProductStockChangedEvent(
        Id,
        Name,
        oldStock,
        Stock,
        StockChangeType.Decreased
    ));
}

public void IncreaseStock(int quantity)
{
    // ... validation ...

    var oldStock = Stock;
    Stock += quantity;

    // Publish Domain Event
    AddLocalEvent(new ProductStockChangedEvent(
        Id,
        Name,
        oldStock,
        Stock,
        StockChangeType.Increased
    ));
}
```

**3. Ø¥Ù†Ø´Ø§Ø¡ Event Handlers**

```csharp
// Application/Products/EventHandlers/ProductCreatedEventHandler.cs
public class ProductCreatedEventHandler
    : ILocalEventHandler<ProductCreatedEvent>,
      ITransientDependency
{
    private readonly ILogger<ProductCreatedEventHandler> _logger;

    public async Task HandleEventAsync(ProductCreatedEvent eventData)
    {
        _logger.LogInformation(
            "ğŸ‰ New Product Created: {ProductName} (ID: {ProductId}) - Price: ${Price}, Stock: {Stock}",
            eventData.ProductName,
            eventData.ProductId,
            eventData.Price,
            eventData.Stock
        );

        await Task.CompletedTask;
    }
}
```

```csharp
// Application/Products/EventHandlers/ProductStockChangedEventHandler.cs
public class ProductStockChangedEventHandler
    : ILocalEventHandler<ProductStockChangedEvent>,
      ITransientDependency
{
    public async Task HandleEventAsync(ProductStockChangedEvent eventData)
    {
        var changeIcon = eventData.ChangeType == StockChangeType.Increased
            ? "ğŸ“ˆ" : "ğŸ“‰";

        _logger.LogInformation(
            "{Icon} Stock Changed: {ProductName} - {OldStock} â†’ {NewStock}",
            changeIcon,
            eventData.ProductName,
            eventData.OldStock,
            eventData.NewStock
        );

        // Low Stock Warning
        if (eventData.ChangeType == StockChangeType.Decreased
            && eventData.NewStock < 10)
        {
            _logger.LogWarning(
                "âš ï¸ Low Stock Alert: {ProductName} - Only {Stock} items left!",
                eventData.ProductName,
                eventData.NewStock
            );
        }
    }
}
```

**4. ØªØ­Ø¯ÙŠØ« ProductAppService - Ù†Ø´Ø± Events**

```csharp
// Application/Products/ProductAppService.cs
public class ProductAppService : ApplicationService
{
    private readonly ILocalEventBus _localEventBus;

    public async Task<ProductDto> CreateAsync(CreateProductDto input)
    {
        var product = new Product(...);
        await _repository.InsertAsync(product);

        // Publish Event
        await _localEventBus.PublishAsync(
            new ProductCreatedEvent(
                product.Id,
                product.Name,
                product.Price,
                product.Stock,
                product.CategoryId
            )
        );

        return MapToDto(product);
    }
}
```

**5. Build Ø§Ù„Ù…Ø´Ø±ÙˆØ¹**
```powershell
dotnet build
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø©:**
```
Build succeeded.
    0 Warning(s) âœ…
    0 Error(s) âœ…
```

**6. ØªØ´ØºÙŠÙ„ API ÙˆØ§Ø®ØªØ¨Ø§Ø± Events**
```powershell
cd src\Andro.Backend.Reference.Web
dotnet run
```

#### Test Scenarios:

**Scenario 1: Create Product**
- Request: POST /api/app/product
- Expected Console: `ğŸ‰ New Product Created: Test Product...`

**Scenario 2: Increase Stock**
- Request: Update product with higher stock
- Expected Console: `ğŸ“ˆ Stock Changed: Product - 50 â†’ 100 (Increased: 50)`

**Scenario 3: Decrease Stock**
- Request: Update product with lower stock
- Expected Console: `ğŸ“‰ Stock Changed: Product - 100 â†’ 5 (Decreased: 95)`
- If stock < 10: `âš ï¸ Low Stock Alert: Product - Only 5 items left!`

#### Event Flow:

```
User Request
  â†“
Application Service
  â†“
Domain Entity
  â†“
AddLocalEvent(Event)
  â†“
Repository.InsertAsync/UpdateAsync
  â†“
UnitOfWork commits transaction
  â†“
Events published automatically
  â†“
Event Handler.HandleEventAsync()
  â†“
Side Effects (Log, Email, Cache, etc.)
```

#### Ø§Ù„ÙÙˆØ§Ø¦Ø¯:

**âœ… Loose Coupling:**
- ÙØµÙ„ ÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Business Logic Ùˆ Side Effects
- ÙƒÙ„ Handler Ù…Ø³ØªÙ‚Ù„

**âœ… Extensibility:**
- Ø³Ù‡Ù„ Ø¬Ø¯Ø§Ù‹ Ø¥Ø¶Ø§ÙØ© handlers Ø¬Ø¯ÙŠØ¯Ø©
- Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯

**âœ… Single Responsibility:**
- ÙƒÙ„ Handler ÙŠÙØ¹Ù„ Ø´ÙŠØ¡ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·
- Application Service ÙŠØ±ÙƒØ² Ø¹Ù„Ù‰ Business Logic

**âœ… Testability:**
- Ø³Ù‡Ù„ Ø§Ø®ØªØ¨Ø§Ø± ÙƒÙ„ Handler Ù…Ù†ÙØµÙ„
- Mock Events Ø¨Ø³Ù‡ÙˆÙ„Ø©

**âœ… Clear Business Events:**
- ÙŠØ¹Ø¨Ø± Ø¹Ù† Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ù‡Ù…Ø© ÙÙŠ Domain
- ÙˆØ§Ø¶Ø­ ÙˆÙ…ÙÙ‡ÙˆÙ…

**âœ… Transaction-Safe:**
- Events ØªÙÙ†Ø´Ø± ÙÙ‚Ø· Ø¨Ø¹Ø¯ commit Ù†Ø§Ø¬Ø­
- Ù„Ø§ events Ø¥Ø°Ø§ ÙØ´Ù„Øª Transaction

#### Use Cases Ù„Ù„Ù€ Event Handlers:

**1. Logging & Audit:**
```csharp
ProductCreatedEventHandler â†’ Log creation
ProductAuditEventHandler â†’ Create audit log
```

**2. Notifications:**
```csharp
ProductCreatedEmailHandler â†’ Send email
ProductCreatedSMSHandler â†’ Send SMS
```

**3. Cache Management:**
```csharp
ProductCacheHandler â†’ Invalidate cache
```

**4. Statistics:**
```csharp
ProductStatisticsHandler â†’ Update counters
```

**5. Integration:**
```csharp
ProductSyncHandler â†’ Sync with external system
```

#### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©:

**Ù…Ù„ÙØ§Øª Ø¬Ø¯ÙŠØ¯Ø©:**
1. `14-event-bus-guide.md` - Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„
2. `event-bus-test-guide.md` - Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
3. `ProductCreatedEvent.cs` - Domain Event
4. `ProductStockChangedEvent.cs` - Domain Event
5. `ProductCreatedEventHandler.cs` - Event Handler
6. `ProductStockChangedEventHandler.cs` - Event Handler

**Ù…Ù„ÙØ§Øª Ù…Ø¹Ø¯Ù„Ø©:**
7. `Product.cs` - Ø¥Ø¶Ø§ÙØ© AddLocalEvent ÙÙŠ domain methods
8. `ProductAppService.cs` - Ø¥Ø¶Ø§ÙØ© ILocalEventBus Ùˆ publish events

#### Ø§Ù„Ø®Ù„Ø§ØµØ©:

âœ… **Event Bus Layer ÙƒØ§Ù…Ù„ ÙˆÙ…Ø·Ø¨Ù‚**
âœ… **2 Domain Events Ø¬Ø§Ù‡Ø²Ø©**
âœ… **2 Event Handlers Ø¬Ø§Ù‡Ø²Ø©**
âœ… **Loose Coupling Ù…Ø­Ù‚Ù‚**
âœ… **Extensible Architecture**
âœ… **Transaction-Safe Events**
âœ… **Build Ù†Ø¸ÙŠÙ 0 warnings**
âœ… **Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù€ Logs ÙÙŠ Console!**

### 18. ÙƒØªØ§Ø¨Ø© Unit & Integration Tests

**Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªÙˆØ«ÙŠÙ‚ÙŠ:** `15-testing-guide.md`

#### Ø§Ù„Ø®Ø·ÙˆØ§Øª:

**1. Ø¥Ù†Ø´Ø§Ø¡ Testing Guide**

ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ (900+ Ø³Ø·Ø±) ÙŠØ´Ø±Ø­:
- Ø£Ù‡Ù…ÙŠØ© Testing
- Ø£Ù†ÙˆØ§Ø¹ Tests (Unit vs Integration)
- Ø¨Ù†ÙŠØ© Test Projects ÙÙŠ ABP
- Base Classes Ù„Ù„Ù€ Testing
- AAA Pattern (Arrange, Act, Assert)
- Shouldly Assertions
- ÙƒÙŠÙÙŠØ© ØªØ´ØºÙŠÙ„ Tests
- Best Practices

**2. ÙƒØªØ§Ø¨Ø© Domain Tests**

```csharp
// test/Andro.Backend.Reference.Domain.Tests/Products/Product_Tests.cs
public class Product_Tests : ReferenceDomainTestBase<ReferenceDomainTestModule>
{
    [Fact]
    public void Should_Create_Product_With_Valid_Data() { ... }

    [Fact]
    public void Should_Set_Valid_Price() { ... }

    [Fact]
    public void Should_Not_Allow_Price_Below_Minimum() { ... }

    [Fact]
    public void Should_Increase_Stock() { ... }

    [Fact]
    public void Should_Throw_InsufficientStockException() { ... }

    // ... 14 total tests
}
```

**Tests Ø§Ù„Ù…ÙƒØªÙˆØ¨Ø© Ù„Ù„Ù€ Domain:**
- âœ… Product creation validation
- âœ… Name validation
- âœ… Price validation (min/max)
- âœ… Stock validation (min/max)
- âœ… Increase stock
- âœ… Decrease stock
- âœ… InsufficientStockException

**Ø¥Ø¬Ù…Ø§Ù„ÙŠ:** 14 test Ù„Ù„Ù€ Domain Layer

**3. ÙƒØªØ§Ø¨Ø© Application Tests**

```csharp
// test/Andro.Backend.Reference.Application.Tests/Products/ProductAppService_Tests.cs
public class ProductAppService_Tests : ReferenceApplicationTestBase<ReferenceApplicationTestModule>
{
    [Fact]
    public async Task Should_Get_Product_List() { ... }

    [Fact]
    public async Task Should_Create_Valid_Product() { ... }

    [Fact]
    public async Task Should_Not_Create_Product_With_Invalid_Category() { ... }

    [Fact]
    public async Task Should_Not_Create_Product_With_Duplicate_Name() { ... }

    [Fact]
    public async Task Should_Update_Product() { ... }

    [Fact]
    public async Task Should_Delete_Product() { ... }

    // ... 18 total tests
}
```

**Tests Ø§Ù„Ù…ÙƒØªÙˆØ¨Ø© Ù„Ù„Ù€ Application:**
- âœ… Get product list
- âœ… Get product by ID
- âœ… Create valid product
- âœ… Create with invalid category (BusinessException)
- âœ… Create duplicate product (BusinessException)
- âœ… Update product
- âœ… Update with invalid category
- âœ… Update with duplicate name
- âœ… Delete product
- âœ… Validate price range
- âœ… Validate stock range

**Ø¥Ø¬Ù…Ø§Ù„ÙŠ:** 18 test Ù„Ù„Ù€ Application Layer

**4. ÙƒØªØ§Ø¨Ø© Event Handler Tests**

```csharp
// test/.../Products/ProductCreatedEventHandler_Tests.cs
public class ProductCreatedEventHandler_Tests : ReferenceApplicationTestBase<ReferenceApplicationTestModule>
{
    [Fact]
    public async Task Should_Handle_ProductCreated_Event() { ... }

    [Fact]
    public async Task Should_Handle_Multiple_Events() { ... }
}
```

```csharp
// test/.../Products/ProductStockChangedEventHandler_Tests.cs
public class ProductStockChangedEventHandler_Tests : ReferenceApplicationTestBase<ReferenceApplicationTestModule>
{
    [Fact]
    public async Task Should_Handle_Stock_Increased_Event() { ... }

    [Fact]
    public async Task Should_Handle_Stock_Decreased_Event() { ... }

    [Fact]
    public async Task Should_Handle_Low_Stock_Event() { ... }

    [Fact]
    public async Task Should_Calculate_Change_Amount_Correctly() { ... }
}
```

**Ø¥Ø¬Ù…Ø§Ù„ÙŠ:** 6 test Ù„Ù„Ù€ Event Handlers

#### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©:

**Ù…Ù„ÙØ§Øª Ø¬Ø¯ÙŠØ¯Ø©:**
1. `15-testing-guide.md` - Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ (900+ Ø³Ø·Ø±)
2. `Product_Tests.cs` - 14 domain tests
3. `ProductAppService_Tests.cs` - 18 application tests
4. `ProductCreatedEventHandler_Tests.cs` - 2 event tests
5. `ProductStockChangedEventHandler_Tests.cs` - 4 event tests

**Ø¥Ø¬Ù…Ø§Ù„ÙŠ Tests Ø§Ù„Ù…ÙƒØªÙˆØ¨Ø©:** `38 test` âœ…

#### Testing Patterns Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:

**1. AAA Pattern:**
```csharp
[Fact]
public async Task Should_Create_Valid_Product()
{
    // Arrange - Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    var input = new CreateProductDto { ... };

    // Act - ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯
    var result = await _service.CreateAsync(input);

    // Assert - Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†ØªÙŠØ¬Ø©
    result.ShouldNotBeNull();
    result.Name.ShouldBe(input.Name);
}
```

**2. Shouldly Assertions:**
```csharp
// Readable & Clear
result.ShouldNotBeNull();
result.Name.ShouldBe("Expected");
result.Price.ShouldBeGreaterThan(0);
Should.Throw<BusinessException>(() => { ... });
await Should.ThrowAsync<BusinessException>(async () => { ... });
```

**3. Test Isolation:**
- ÙƒÙ„ test Ù…Ø³ØªÙ‚Ù„
- Ø§Ø³ØªØ®Ø¯Ø§Ù… unique names (Guid)
- Ù„Ø§ dependencies Ø¨ÙŠÙ† tests

#### Test Coverage:

**Domain Layer:**
- âœ… Entity validation
- âœ… Business rules
- âœ… Domain exceptions

**Application Layer:**
- âœ… CRUD operations
- âœ… Business validation
- âœ… Exception handling
- âœ… Duplicate detection

**Event Handlers:**
- âœ… Event handling
- âœ… Multiple events
- âœ… Event data validation

#### Build Status:

```powershell
dotnet build test/Andro.Backend.Reference.Domain.Tests
# Result: âœ… 0 Error(s)

dotnet build test/Andro.Backend.Reference.Application.Tests
# Result: âœ… 0 Error(s)
```

**Tests compile successfully! âœ…**

#### Ù…Ù„Ø§Ø­Ø¸Ø©:

Tests ØªØ­ØªØ§Ø¬ test infrastructure configuration Ø¥Ø¶Ø§ÙÙŠ Ù„ØªØ´ØºÙŠÙ„Ù‡Ø§ØŒ Ù„ÙƒÙ†:
- âœ… Ø§Ù„ÙƒÙˆØ¯ Ù…ÙƒØªÙˆØ¨ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
- âœ… Tests ØªØªØ¨Ø¹ ABP best practices
- âœ… Build Ù†Ø§Ø¬Ø­ Ù„Ù„Ù€ test projects
- âœ… Ready for execution Ø¨Ø¹Ø¯ configuration

#### Ø§Ù„Ø®Ù„Ø§ØµØ©:

âœ… **Testing Guide Ù…ÙƒØªÙ…Ù„**
âœ… **38 Unit & Integration Tests Ù…ÙƒØªÙˆØ¨Ø©**
âœ… **Domain Tests (14)**
âœ… **Application Tests (18)**
âœ… **Event Handler Tests (6)**
âœ… **AAA Pattern implemented**
âœ… **Shouldly assertions**
âœ… **Test isolation achieved**
âœ… **Build successful**

---
